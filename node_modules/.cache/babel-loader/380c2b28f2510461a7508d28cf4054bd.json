{"ast":null,"code":"var _jsxFileName = \"/home/augustin/vader-dapp/src/components/BondItem.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { useWallet } from 'use-wallet';\nimport { ethers } from 'ethers';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\nimport { Flex, Image, Tag } from '@chakra-ui/react';\nimport { CheckCircleIcon } from '@chakra-ui/icons';\nimport { prettifyCurrency, getPercentage, calculateDifference } from '../common/utils';\nimport { useBondInfo } from '../hooks/useBondInfo';\nimport { useUniswapV2Price } from '../hooks/useUniswapV2Price';\nimport defaults from '../common/defaults';\nimport { useBondPrice } from '../hooks/useBondPrice';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const BondItem = props => {\n  _s();\n\n  var _usdcEth$pairs, _usdcEth$pairs$, _usdcEth$pairs2, _usdcEth$pairs2$, _vaderEth$pairs, _vaderEth$pairs$, _bondInfo$, _bondInfo$2, _bondInfo$3, _props$token, _props$token2, _props$token3, _props$token4, _props$token5, _bondInfo$4, _usdcEth$pairs3, _usdcEth$pairs3$, _usdcEth$pairs4, _usdcEth$pairs4$;\n\n  BondItem.propTypes = {\n    address: PropTypes.string.isRequired,\n    principal: PropTypes.object.isRequired,\n    token0: PropTypes.object.isRequired,\n    token1: PropTypes.object,\n    payout: PropTypes.object.isRequired\n  };\n  const wallet = useWallet();\n  const {\n    data: bondInfo\n  } = useBondInfo(props.address, wallet.account, true);\n  const [vaderEth] = useUniswapV2Price(props.principal.address);\n  const [usdcEth] = useUniswapV2Price(defaults.address.uniswapV2.usdcEthPair);\n  const [principalEth] = useUniswapV2Price(props.principal.address, true);\n  const {\n    data: price\n  } = useBondPrice(props.address);\n  const bondPirce = Number(ethers.utils.formatUnits(price ? price : '0', 18)) * (Number(usdcEth === null || usdcEth === void 0 ? void 0 : (_usdcEth$pairs = usdcEth.pairs) === null || _usdcEth$pairs === void 0 ? void 0 : (_usdcEth$pairs$ = _usdcEth$pairs[0]) === null || _usdcEth$pairs$ === void 0 ? void 0 : _usdcEth$pairs$.token0Price) * Number(principalEth === null || principalEth === void 0 ? void 0 : principalEth.principalPrice));\n  const marketPrice = Number(usdcEth === null || usdcEth === void 0 ? void 0 : (_usdcEth$pairs2 = usdcEth.pairs) === null || _usdcEth$pairs2 === void 0 ? void 0 : (_usdcEth$pairs2$ = _usdcEth$pairs2[0]) === null || _usdcEth$pairs2$ === void 0 ? void 0 : _usdcEth$pairs2$.token0Price) * Number(vaderEth === null || vaderEth === void 0 ? void 0 : (_vaderEth$pairs = vaderEth.pairs) === null || _vaderEth$pairs === void 0 ? void 0 : (_vaderEth$pairs$ = _vaderEth$pairs[0]) === null || _vaderEth$pairs$ === void 0 ? void 0 : _vaderEth$pairs$.token1Price);\n  console.log(principalEth);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Link, {\n      to: `/bond/${props.address}`,\n      children: /*#__PURE__*/_jsxDEV(Flex, {\n        width: \"100%\",\n        alignItems: \"center\",\n        justifyContent: \"space-between\",\n        p: {\n          base: '12px 11px',\n          md: '0 24px'\n        },\n        minH: \"60px\",\n        cursor: \"pointer\",\n        animation: bondInfo !== null && bondInfo !== void 0 && bondInfo[1] && bondInfo !== null && bondInfo !== void 0 && (_bondInfo$ = bondInfo[1]) !== null && _bondInfo$ !== void 0 && _bondInfo$.gt(0) ? '2.3s ease-in-out infinite bgAnimation' : '',\n        transition: \"all 0.3s ease 0s\",\n        background: \"rgba(244, 155, 202, 0.08) none repeat scroll 0% 0%\",\n        mb: \"16px\",\n        borderRadius: \"16px\",\n        border: bondInfo !== null && bondInfo !== void 0 && bondInfo[1] && bondInfo !== null && bondInfo !== void 0 && (_bondInfo$2 = bondInfo[1]) !== null && _bondInfo$2 !== void 0 && _bondInfo$2.gt(0) ? '1px solid #ffffff10' : '1px solid #ffffff08',\n        _hover: {\n          cursor: 'pointer',\n          background: 'rgba(244, 155, 202, 0.2) none repeat scroll 0% 0%',\n          border: '1px solid #ffffff10'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Flex, {\n          alignItems: {\n            base: 'center'\n          },\n          width: {\n            base: '54%',\n            md: ''\n          },\n          flexWrap: bondInfo !== null && bondInfo !== void 0 && bondInfo[1] && bondInfo !== null && bondInfo !== void 0 && (_bondInfo$3 = bondInfo[1]) !== null && _bondInfo$3 !== void 0 && _bondInfo$3.gt(0) ? 'wrap' : '',\n          fontSize: {\n            base: '0.75rem',\n            md: '1rem'\n          },\n          fontWeight: \"bolder\",\n          children: [/*#__PURE__*/_jsxDEV(Image, {\n            width: \"23px\",\n            height: \"23px\",\n            borderRadius: \"50%\",\n            mr: {\n              base: '3px',\n              md: '7px'\n            },\n            src: (_props$token = props.token0) === null || _props$token === void 0 ? void 0 : _props$token.logoURI,\n            alt: `${(_props$token2 = props.token0) === null || _props$token2 === void 0 ? void 0 : _props$token2.name} token`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(Image, {\n            width: \"23px\",\n            height: \"23px\",\n            borderRadius: \"50%\",\n            mr: {\n              base: '2px',\n              md: '10px'\n            },\n            src: (_props$token3 = props.token1) === null || _props$token3 === void 0 ? void 0 : _props$token3.logoURI,\n            alt: `${(_props$token4 = props.token1) === null || _props$token4 === void 0 ? void 0 : _props$token4.name} token`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 7\n          }, this), (_props$token5 = props.token0) === null || _props$token5 === void 0 ? void 0 : _props$token5.symbol, props.token1 ? ` / ${props.token1.symbol}` : '', (bondInfo === null || bondInfo === void 0 ? void 0 : bondInfo[1]) && (bondInfo === null || bondInfo === void 0 ? void 0 : (_bondInfo$4 = bondInfo[1]) === null || _bondInfo$4 === void 0 ? void 0 : _bondInfo$4.gt(0)) && /*#__PURE__*/_jsxDEV(Tag, {\n            fontSize: {\n              base: '0.67rem',\n              md: '0.83rem'\n            },\n            mt: {\n              base: '3px',\n              md: ''\n            },\n            ml: \"10px\",\n            borderRadius: \"11px\",\n            variant: \"subtle\",\n            colorScheme: \"cyan\",\n            children: [/*#__PURE__*/_jsxDEV(CheckCircleIcon, {\n              mr: \"5px\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 9\n            }, this), \" Purchased\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 8\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Flex, {\n          flexDir: \"row\",\n          alignContent: \"flex-end\",\n          justifyContent: \"flex-end\",\n          gridGap: \"0.7rem\",\n          children: [price && (usdcEth === null || usdcEth === void 0 ? void 0 : (_usdcEth$pairs3 = usdcEth.pairs) === null || _usdcEth$pairs3 === void 0 ? void 0 : (_usdcEth$pairs3$ = _usdcEth$pairs3[0]) === null || _usdcEth$pairs3$ === void 0 ? void 0 : _usdcEth$pairs3$.token0Price) && (principalEth === null || principalEth === void 0 ? void 0 : principalEth.principalPrice) && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: /*#__PURE__*/_jsxDEV(Tag, {\n              fontSize: {\n                base: '0.67rem',\n                md: '0.83rem'\n              },\n              colorScheme: \"gray\",\n              children: prettifyCurrency(Number(ethers.utils.formatUnits(price, 18)) * (Number(usdcEth === null || usdcEth === void 0 ? void 0 : (_usdcEth$pairs4 = usdcEth.pairs) === null || _usdcEth$pairs4 === void 0 ? void 0 : (_usdcEth$pairs4$ = _usdcEth$pairs4[0]) === null || _usdcEth$pairs4$ === void 0 ? void 0 : _usdcEth$pairs4$.token0Price) * Number(principalEth === null || principalEth === void 0 ? void 0 : principalEth.principalPrice)), 0, 5)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 10\n            }, this)\n          }, void 0, false), isFinite(calculateDifference(marketPrice, bondPirce)) && calculateDifference(marketPrice, bondPirce) > 0 && /*#__PURE__*/_jsxDEV(Tag, {\n            fontSize: {\n              base: '0.67rem',\n              md: '0.83rem'\n            },\n            colorScheme: \"gray\",\n            children: getPercentage(calculateDifference(marketPrice, bondPirce))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 8\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 4\n    }, this)\n  }, void 0, false);\n};\n\n_s(BondItem, \"F7npYE8czJGN5xjkY0kYeXr/O+0=\", false, function () {\n  return [useWallet, useBondInfo, useUniswapV2Price, useUniswapV2Price, useUniswapV2Price, useBondPrice];\n});\n\n_c = BondItem;\n\nvar _c;\n\n$RefreshReg$(_c, \"BondItem\");","map":{"version":3,"sources":["/home/augustin/vader-dapp/src/components/BondItem.js"],"names":["React","useWallet","ethers","PropTypes","Link","Flex","Image","Tag","CheckCircleIcon","prettifyCurrency","getPercentage","calculateDifference","useBondInfo","useUniswapV2Price","defaults","useBondPrice","BondItem","props","propTypes","address","string","isRequired","principal","object","token0","token1","payout","wallet","data","bondInfo","account","vaderEth","usdcEth","uniswapV2","usdcEthPair","principalEth","price","bondPirce","Number","utils","formatUnits","pairs","token0Price","principalPrice","marketPrice","token1Price","console","log","base","md","gt","cursor","background","border","logoURI","name","symbol","isFinite"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { useWallet } from 'use-wallet'\nimport { ethers } from 'ethers'\nimport PropTypes from 'prop-types'\nimport { Link } from 'react-router-dom'\nimport { Flex, Image, Tag } from '@chakra-ui/react'\nimport { CheckCircleIcon } from '@chakra-ui/icons'\nimport { prettifyCurrency, getPercentage, calculateDifference } from '../common/utils'\nimport { useBondInfo } from '../hooks/useBondInfo'\nimport { useUniswapV2Price } from '../hooks/useUniswapV2Price'\nimport defaults from '../common/defaults'\nimport { useBondPrice } from '../hooks/useBondPrice'\n\nexport const BondItem = (props) => {\n\n\tBondItem.propTypes = {\n\t\taddress: PropTypes.string.isRequired,\n\t\tprincipal: PropTypes.object.isRequired,\n\t\ttoken0: PropTypes.object.isRequired,\n\t\ttoken1: PropTypes.object,\n\t\tpayout: PropTypes.object.isRequired,\n\t}\n\n\tconst wallet = useWallet()\n\tconst { data: bondInfo } = useBondInfo(props.address, wallet.account, true)\n\tconst [vaderEth] = useUniswapV2Price(props.principal.address)\n\tconst [usdcEth] = useUniswapV2Price(defaults.address.uniswapV2.usdcEthPair)\n\tconst [principalEth] = useUniswapV2Price(props.principal.address, true)\n\tconst { data: price } = useBondPrice(props.address)\n\tconst bondPirce = (Number(ethers.utils.formatUnits(price ? price : '0', 18)) *\n\t(Number(usdcEth?.pairs?.[0]?.token0Price) * Number(principalEth?.principalPrice)))\n\tconst marketPrice = (Number(usdcEth?.pairs?.[0]?.token0Price) * Number(vaderEth?.pairs?.[0]?.token1Price))\n\n\tconsole.log(principalEth)\n\n\treturn (\n\t\t<>\n\t\t\t<Link to={`/bond/${props.address}`}>\n\t\t\t\t<Flex\n\t\t\t\t\twidth='100%'\n\t\t\t\t\talignItems='center'\n\t\t\t\t\tjustifyContent='space-between'\n\t\t\t\t\tp={{ base: '12px 11px', md: '0 24px' }}\n\t\t\t\t\tminH='60px'\n\t\t\t\t\tcursor='pointer'\n\t\t\t\t\tanimation={ bondInfo?.[1] && bondInfo?.[1]?.gt(0) ? '2.3s ease-in-out infinite bgAnimation' : '' }\n\t\t\t\t\ttransition='all 0.3s ease 0s'\n\t\t\t\t\tbackground='rgba(244, 155, 202, 0.08) none repeat scroll 0% 0%'\n\t\t\t\t\tmb='16px'\n\t\t\t\t\tborderRadius='16px'\n\t\t\t\t\tborder={ bondInfo?.[1] && bondInfo?.[1]?.gt(0) ? '1px solid #ffffff10' : '1px solid #ffffff08' }\n\t\t\t\t\t_hover={{\n\t\t\t\t\t\tcursor: 'pointer',\n\t\t\t\t\t\tbackground: 'rgba(244, 155, 202, 0.2) none repeat scroll 0% 0%',\n\t\t\t\t\t\tborder: '1px solid #ffffff10',\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<Flex\n\t\t\t\t\t\talignItems={{ base: 'center' }}\n\t\t\t\t\t\twidth={{ base: '54%', md: '' }}\n\t\t\t\t\t\tflexWrap={bondInfo?.[1] && bondInfo?.[1]?.gt(0) ? 'wrap' : '' }\n\t\t\t\t\t\tfontSize={{ base: '0.75rem', md: '1rem' }}\n\t\t\t\t\t\tfontWeight='bolder'>\n\t\t\t\t\t\t<Image\n\t\t\t\t\t\t\twidth='23px'\n\t\t\t\t\t\t\theight='23px'\n\t\t\t\t\t\t\tborderRadius='50%'\n\t\t\t\t\t\t\tmr={{ base: '3px', md: '7px' }}\n\t\t\t\t\t\t\tsrc={props.token0?.logoURI}\n\t\t\t\t\t\t\talt={`${props.token0?.name} token`}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Image\n\t\t\t\t\t\t\twidth='23px'\n\t\t\t\t\t\t\theight='23px'\n\t\t\t\t\t\t\tborderRadius='50%'\n\t\t\t\t\t\t\tmr={{ base: '2px', md: '10px' }}\n\t\t\t\t\t\t\tsrc={props.token1?.logoURI}\n\t\t\t\t\t\t\talt={`${props.token1?.name} token`}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{props.token0?.symbol}{props.token1 ? ` / ${props.token1.symbol}` : ''}\n\t\t\t\t\t\t{bondInfo?.[1] && bondInfo?.[1]?.gt(0) &&\n\t\t\t\t\t\t\t<Tag\n\t\t\t\t\t\t\t\tfontSize={{ base: '0.67rem', md: '0.83rem' }}\n\t\t\t\t\t\t\t\tmt={{ base: '3px', md: '' }}\n\t\t\t\t\t\t\t\tml='10px'\n\t\t\t\t\t\t\t\tborderRadius='11px'\n\t\t\t\t\t\t\t\tvariant='subtle'\n\t\t\t\t\t\t\t\tcolorScheme='cyan'>\n\t\t\t\t\t\t\t\t<CheckCircleIcon\n\t\t\t\t\t\t\t\t\tmr='5px'\n\t\t\t\t\t\t\t\t/> Purchased\n\t\t\t\t\t\t\t</Tag>\n\t\t\t\t\t\t}\n\t\t\t\t\t</Flex>\n\t\t\t\t\t<Flex\n\t\t\t\t\t\tflexDir='row'\n\t\t\t\t\t\talignContent='flex-end'\n\t\t\t\t\t\tjustifyContent='flex-end'\n\t\t\t\t\t\tgridGap='0.7rem'\n\t\t\t\t\t>\n\t\t\t\t\t\t{price && usdcEth?.pairs?.[0]?.token0Price && principalEth?.principalPrice &&\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<Tag\n\t\t\t\t\t\t\t\t\t\tfontSize={{ base: '0.67rem', md: '0.83rem' }}\n\t\t\t\t\t\t\t\t\t\tcolorScheme='gray'>\n\t\t\t\t\t\t\t\t\t\t{prettifyCurrency(\n\t\t\t\t\t\t\t\t\t\t\tNumber(ethers.utils.formatUnits(price, 18)) *\n\t\t\t\t\t\t\t\t\t\t\t(Number(usdcEth?.pairs?.[0]?.token0Price) * Number(principalEth?.principalPrice)),\n\t\t\t\t\t\t\t\t\t\t\t0, 5)}\n\t\t\t\t\t\t\t\t\t</Tag>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{isFinite(calculateDifference(marketPrice, bondPirce)) && calculateDifference(marketPrice, bondPirce) > 0 &&\n\t\t\t\t\t\t\t<Tag\n\t\t\t\t\t\t\t\tfontSize={{ base: '0.67rem', md: '0.83rem' }}\n\t\t\t\t\t\t\t\tcolorScheme='gray'>\n\t\t\t\t\t\t\t\t{getPercentage(calculateDifference(marketPrice, bondPirce))}\n\t\t\t\t\t\t\t</Tag>\n\t\t\t\t\t\t}\n\t\t\t\t\t</Flex>\n\t\t\t\t</Flex>\n\t\t\t</Link>\n\t\t</>\n\t)\n}"]},"metadata":{},"sourceType":"module"}