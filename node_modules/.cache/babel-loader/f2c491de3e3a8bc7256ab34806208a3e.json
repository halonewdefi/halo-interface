{"ast":null,"code":"var _s = $RefreshSig$();\n\n/* eslint-disable no-unused-vars */\nimport { useQuery as useApolloQuery, gql } from '@apollo/client';\nimport { useQuery } from 'react-query';\nimport defaults from '../common/defaults';\nimport { getMinter, getMinterLbt, getStaleVaderPrice } from '../common/ethereum';\nexport const useUniswapTWAP = function () {\n  _s();\n\n  let rpc = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n  let pollInterval = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaults.api.graphql.pollInterval;\n  let staleTime = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : defaults.api.staleTime;\n\n  if (!rpc) {// GQL 2 DO\n  } else {\n    const {\n      data: minter\n    } = useQuery('minter', async () => {\n      return await getMinter();\n    }, {\n      staleTime: staleTime\n    });\n    const {\n      data: lbt\n    } = useQuery('lbt', async () => {\n      return await getMinterLbt(minter);\n    }, {\n      staleTime: staleTime,\n      enabled: !!minter\n    });\n    const twap = useQuery('getStaleVaderPrice', async () => {\n      return await getStaleVaderPrice(lbt);\n    }, {\n      staleTime: staleTime,\n      enabled: !!lbt\n    });\n    return twap;\n  }\n};\n\n_s(useUniswapTWAP, \"J6tksC/iZt77OTPbkOkgVexy4vo=\", false, function () {\n  return [useQuery, useQuery, useQuery];\n});","map":{"version":3,"sources":["/home/augustin/vader-dapp/src/hooks/useUniswapTWAP.js"],"names":["useQuery","useApolloQuery","gql","defaults","getMinter","getMinterLbt","getStaleVaderPrice","useUniswapTWAP","rpc","pollInterval","api","graphql","staleTime","data","minter","lbt","enabled","twap"],"mappings":";;AAAA;AACA,SAASA,QAAQ,IAAIC,cAArB,EAAqCC,GAArC,QAAgD,gBAAhD;AACA,SAASF,QAAT,QAAyB,aAAzB;AACA,OAAOG,QAAP,MAAqB,oBAArB;AACA,SAASC,SAAT,EAAoBC,YAApB,EAAkCC,kBAAlC,QAA4D,oBAA5D;AAEA,OAAO,MAAMC,cAAc,GAAG,YAAsG;AAAA;;AAAA,MAArGC,GAAqG,uEAA/F,IAA+F;AAAA,MAAzFC,YAAyF,uEAA1EN,QAAQ,CAACO,GAAT,CAAaC,OAAb,CAAqBF,YAAqD;AAAA,MAAvCG,SAAuC,uEAA3BT,QAAQ,CAACO,GAAT,CAAaE,SAAc;;AAEnI,MAAI,CAACJ,GAAL,EAAU,CACT;AACA,GAFD,MAGK;AAEJ,UAAM;AAAEK,MAAAA,IAAI,EAAEC;AAAR,QAAmBd,QAAQ,CAAC,QAAD,EAAW,YAAY;AACvD,aAAO,MAAMI,SAAS,EAAtB;AACA,KAFgC,EAE9B;AACFQ,MAAAA,SAAS,EAAEA;AADT,KAF8B,CAAjC;AAOA,UAAM;AAAEC,MAAAA,IAAI,EAAEE;AAAR,QAAgBf,QAAQ,CAAC,KAAD,EAAQ,YAAY;AACjD,aAAO,MAAMK,YAAY,CAACS,MAAD,CAAzB;AACA,KAF6B,EAE3B;AACFF,MAAAA,SAAS,EAAEA,SADT;AAEFI,MAAAA,OAAO,EAAE,CAAC,CAACF;AAFT,KAF2B,CAA9B;AAQA,UAAMG,IAAI,GAAGjB,QAAQ,CAAC,oBAAD,EAAuB,YAAY;AACvD,aAAO,MAAMM,kBAAkB,CAACS,GAAD,CAA/B;AACA,KAFoB,EAElB;AACFH,MAAAA,SAAS,EAAEA,SADT;AAEFI,MAAAA,OAAO,EAAE,CAAC,CAACD;AAFT,KAFkB,CAArB;AAQA,WAAOE,IAAP;AACA;AACD,CAhCM;;GAAMV,c;UAOcP,Q,EAOHA,Q,EAQTA,Q","sourcesContent":["/* eslint-disable no-unused-vars */\nimport { useQuery as useApolloQuery, gql } from '@apollo/client'\nimport { useQuery } from 'react-query'\nimport defaults from '../common/defaults'\nimport { getMinter, getMinterLbt, getStaleVaderPrice } from '../common/ethereum'\n\nexport const useUniswapTWAP = (rpc = true, pollInterval = defaults.api.graphql.pollInterval, staleTime = defaults.api.staleTime) => {\n\n\tif (!rpc) {\n\t\t// GQL 2 DO\n\t}\n\telse {\n\n\t\tconst { data: minter } = useQuery('minter', async () => {\n\t\t\treturn await getMinter()\n\t\t}, {\n\t\t\tstaleTime: staleTime,\n\t\t},\n\t\t)\n\n\t\tconst { data: lbt } = useQuery('lbt', async () => {\n\t\t\treturn await getMinterLbt(minter)\n\t\t}, {\n\t\t\tstaleTime: staleTime,\n\t\t\tenabled: !!minter,\n\t\t},\n\t\t)\n\n\t\tconst twap = useQuery('getStaleVaderPrice', async () => {\n\t\t\treturn await getStaleVaderPrice(lbt)\n\t\t}, {\n\t\t\tstaleTime: staleTime,\n\t\t\tenabled: !!lbt,\n\t\t},\n\t\t)\n\n\t\treturn twap\n\t}\n}"]},"metadata":{},"sourceType":"module"}