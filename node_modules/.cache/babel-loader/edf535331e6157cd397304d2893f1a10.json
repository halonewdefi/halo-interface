{"ast":null,"code":"var _s = $RefreshSig$();\n\n/* eslint-disable no-unused-vars */\nimport { useQuery as useApolloQuery, gql } from '@apollo/client';\nimport { useQuery } from 'react-query';\nimport { getVirtualPrice, getDy } from '../common/ethereum';\nimport { utils } from 'ethers';\nimport defaults from '../common/defaults';\nexport const useUSDVprice = function () {\n  _s();\n\n  let rpc = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n  let pollInterval = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaults.api.graphql.pollInterval;\n  let staleTime = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : defaults.api.staleTime;\n\n  if (!rpc) {// GQL 2 DO\n  } else {\n    const usdv3crvfPrice = useQuery(`get_dy_${defaults.address.usdv3crvf}`, async () => {\n      return await getDy(0, 1, utils.parseEther('1'), defaults.address.usdv3crvf);\n    }, {\n      staleTime: defaults.api.staleTime\n    });\n    const crv3poolPrice = useQuery(`virtualPrice_${defaults.address.crv3pool}`, async () => {\n      return await getVirtualPrice(defaults.address.crv3pool);\n    }, {\n      staleTime: defaults.api.staleTime\n    });\n\n    if (usdv3crvfPrice !== null && usdv3crvfPrice !== void 0 && usdv3crvfPrice.data && crv3poolPrice !== null && crv3poolPrice !== void 0 && crv3poolPrice.data) {\n      var _usdv3crvfPrice$data, _usdv3crvfPrice$data2;\n\n      console.log((usdv3crvfPrice === null || usdv3crvfPrice === void 0 ? void 0 : (_usdv3crvfPrice$data = usdv3crvfPrice.data) === null || _usdv3crvfPrice$data === void 0 ? void 0 : _usdv3crvfPrice$data.mul(crv3poolPrice === null || crv3poolPrice === void 0 ? void 0 : crv3poolPrice.data).toString()) / 1e18);\n      return usdv3crvfPrice === null || usdv3crvfPrice === void 0 ? void 0 : (_usdv3crvfPrice$data2 = usdv3crvfPrice.data) === null || _usdv3crvfPrice$data2 === void 0 ? void 0 : _usdv3crvfPrice$data2.mul(crv3poolPrice === null || crv3poolPrice === void 0 ? void 0 : crv3poolPrice.data);\n    }\n  }\n};\n\n_s(useUSDVprice, \"8/SaaYF0FfLEI9UrInhvSD/UCOc=\", false, function () {\n  return [useQuery, useQuery];\n});","map":{"version":3,"sources":["/home/augustin/vader-dapp/src/hooks/useUSDVprice.js"],"names":["useQuery","useApolloQuery","gql","getVirtualPrice","getDy","utils","defaults","useUSDVprice","rpc","pollInterval","api","graphql","staleTime","usdv3crvfPrice","address","usdv3crvf","parseEther","crv3poolPrice","crv3pool","data","console","log","mul","toString"],"mappings":";;AAAA;AACA,SAASA,QAAQ,IAAIC,cAArB,EAAqCC,GAArC,QAAgD,gBAAhD;AACA,SAASF,QAAT,QAAyB,aAAzB;AACA,SAASG,eAAT,EAA0BC,KAA1B,QAAuC,oBAAvC;AACA,SAASC,KAAT,QAAsB,QAAtB;AACA,OAAOC,QAAP,MAAqB,oBAArB;AAEA,OAAO,MAAMC,YAAY,GAAG,YAAsG;AAAA;;AAAA,MAArGC,GAAqG,uEAA/F,IAA+F;AAAA,MAAzFC,YAAyF,uEAA1EH,QAAQ,CAACI,GAAT,CAAaC,OAAb,CAAqBF,YAAqD;AAAA,MAAvCG,SAAuC,uEAA3BN,QAAQ,CAACI,GAAT,CAAaE,SAAc;;AAEjI,MAAI,CAACJ,GAAL,EAAU,CACT;AACA,GAFD,MAGK;AAEJ,UAAMK,cAAc,GAAGb,QAAQ,CAAE,UAASM,QAAQ,CAACQ,OAAT,CAAiBC,SAAU,EAAtC,EAC9B,YAAY;AACX,aAAO,MAAMX,KAAK,CAAC,CAAD,EAAI,CAAJ,EAAOC,KAAK,CAACW,UAAN,CAAiB,GAAjB,CAAP,EAA8BV,QAAQ,CAACQ,OAAT,CAAiBC,SAA/C,CAAlB;AACA,KAH6B,EAG3B;AACFH,MAAAA,SAAS,EAAEN,QAAQ,CAACI,GAAT,CAAaE;AADtB,KAH2B,CAA/B;AAQA,UAAMK,aAAa,GAAGjB,QAAQ,CAAE,gBAAeM,QAAQ,CAACQ,OAAT,CAAiBI,QAAS,EAA3C,EAC7B,YAAY;AACX,aAAO,MAAMf,eAAe,CAACG,QAAQ,CAACQ,OAAT,CAAiBI,QAAlB,CAA5B;AACA,KAH4B,EAG1B;AACFN,MAAAA,SAAS,EAAEN,QAAQ,CAACI,GAAT,CAAaE;AADtB,KAH0B,CAA9B;;AAQA,QACCC,cAAc,SAAd,IAAAA,cAAc,WAAd,IAAAA,cAAc,CAAEM,IAAhB,IACAF,aADA,aACAA,aADA,eACAA,aAAa,CAAEE,IAFhB,EAEsB;AAAA;;AACrBC,MAAAA,OAAO,CAACC,GAAR,CAAY,CAAAR,cAAc,SAAd,IAAAA,cAAc,WAAd,oCAAAA,cAAc,CAAEM,IAAhB,8EAAsBG,GAAtB,CAA0BL,aAA1B,aAA0BA,aAA1B,uBAA0BA,aAAa,CAAEE,IAAzC,EAA+CI,QAA/C,MAA4D,IAAxE;AACA,aAAOV,cAAP,aAAOA,cAAP,gDAAOA,cAAc,CAAEM,IAAvB,0DAAO,sBAAsBG,GAAtB,CAA0BL,aAA1B,aAA0BA,aAA1B,uBAA0BA,aAAa,CAAEE,IAAzC,CAAP;AACA;AACD;AAED,CA/BM;;GAAMZ,Y;UAOYP,Q,EAQDA,Q","sourcesContent":["/* eslint-disable no-unused-vars */\nimport { useQuery as useApolloQuery, gql } from '@apollo/client'\nimport { useQuery } from 'react-query'\nimport { getVirtualPrice, getDy } from '../common/ethereum'\nimport { utils } from 'ethers'\nimport defaults from '../common/defaults'\n\nexport const useUSDVprice = (rpc = true, pollInterval = defaults.api.graphql.pollInterval, staleTime = defaults.api.staleTime) => {\n\n\tif (!rpc) {\n\t\t// GQL 2 DO\n\t}\n\telse {\n\n\t\tconst usdv3crvfPrice = useQuery(`get_dy_${defaults.address.usdv3crvf}`,\n\t\t\tasync () => {\n\t\t\t\treturn await getDy(0, 1, utils.parseEther('1'), defaults.address.usdv3crvf)\n\t\t\t}, {\n\t\t\t\tstaleTime: defaults.api.staleTime,\n\t\t\t},\n\t\t)\n\n\t\tconst crv3poolPrice = useQuery(`virtualPrice_${defaults.address.crv3pool}`,\n\t\t\tasync () => {\n\t\t\t\treturn await getVirtualPrice(defaults.address.crv3pool)\n\t\t\t}, {\n\t\t\t\tstaleTime: defaults.api.staleTime,\n\t\t\t},\n\t\t)\n\n\t\tif (\n\t\t\tusdv3crvfPrice?.data &&\n\t\t\tcrv3poolPrice?.data) {\n\t\t\tconsole.log(usdv3crvfPrice?.data?.mul(crv3poolPrice?.data).toString() / 1e18)\n\t\t\treturn usdv3crvfPrice?.data?.mul(crv3poolPrice?.data)\n\t\t}\n\t}\n\n}"]},"metadata":{},"sourceType":"module"}