{"ast":null,"code":"var _jsxFileName = \"/home/augustin/vader-dapp/src/components/BondItem.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { useWallet } from 'use-wallet';\nimport { ethers } from 'ethers';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\nimport { Flex, Image, Tag } from '@chakra-ui/react';\nimport { CheckCircleIcon, ArrowForwardIcon } from '@chakra-ui/icons';\nimport { prettifyCurrency, getPercentage, calculateDifference } from '../common/utils';\nimport { useBondInfo } from '../hooks/useBondInfo';\nimport { useUniswapV2Price } from '../hooks/useUniswapV2Price';\nimport defaults from '../common/defaults';\nimport { useBondPrice } from '../hooks/useBondPrice';\nimport { usePreCommit } from '../hooks/usePreCommit';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const BondItem = props => {\n  _s();\n\n  var _props$bond, _props$bond2, _props$bond2$principa, _props$bond3, _props$bond4, _usdcEth$pairs, _usdcEth$pairs$, _usdcEth$pairs2, _usdcEth$pairs2$, _usdcEth$pairs3, _usdcEth$pairs3$, _vaderEth$pairs, _vaderEth$pairs$, _getPercentage, _props$bond5, _bondInfo$, _bondInfo$2, _bondInfo$3, _props$bond$token, _props$bond$token2, _props$bond6, _props$bond6$token, _props$bond$token3, _props$bond$token4, _props$bond$token5, _bondInfo$4, _usdcEth$pairs4, _usdcEth$pairs4$, _usdcEth$pairs5, _usdcEth$pairs5$, _usdcEth$pairs6, _usdcEth$pairs6$, _preCommit$open, _props$bond7, _preCommit$open2, _preCommit$open3, _props$bond8, _props$bond9, _preCommit$open4;\n\n  BondItem.propTypes = {\n    bond: PropTypes.object.isRequired\n  };\n  const wallet = useWallet();\n  const {\n    data: bondInfo\n  } = useBondInfo((_props$bond = props.bond) === null || _props$bond === void 0 ? void 0 : _props$bond.address, wallet.account, true);\n  const [usdcEth] = useUniswapV2Price(defaults.address.uniswapV2.usdcEthPair);\n  const [vaderEth] = useUniswapV2Price(defaults.address.uniswapV2.vaderEthPair);\n  const [principalEth] = useUniswapV2Price((_props$bond2 = props.bond) === null || _props$bond2 === void 0 ? void 0 : (_props$bond2$principa = _props$bond2.principal) === null || _props$bond2$principa === void 0 ? void 0 : _props$bond2$principa.address, true);\n  const {\n    data: price\n  } = useBondPrice((_props$bond3 = props.bond) === null || _props$bond3 === void 0 ? void 0 : _props$bond3.address);\n  const bondInitPrice = props !== null && props !== void 0 && (_props$bond4 = props.bond) !== null && _props$bond4 !== void 0 && _props$bond4.principal ? Number(ethers.utils.formatUnits(price ? price : '0', 18)) * (Number(usdcEth === null || usdcEth === void 0 ? void 0 : (_usdcEth$pairs = usdcEth.pairs) === null || _usdcEth$pairs === void 0 ? void 0 : (_usdcEth$pairs$ = _usdcEth$pairs[0]) === null || _usdcEth$pairs$ === void 0 ? void 0 : _usdcEth$pairs$.token0Price) * Number(principalEth === null || principalEth === void 0 ? void 0 : principalEth.principalPrice)) : Number(ethers.utils.formatUnits(price ? price : '0', 18)) * Number(usdcEth === null || usdcEth === void 0 ? void 0 : (_usdcEth$pairs2 = usdcEth.pairs) === null || _usdcEth$pairs2 === void 0 ? void 0 : (_usdcEth$pairs2$ = _usdcEth$pairs2[0]) === null || _usdcEth$pairs2$ === void 0 ? void 0 : _usdcEth$pairs2$.token0Price);\n  const marketPrice = Number(usdcEth === null || usdcEth === void 0 ? void 0 : (_usdcEth$pairs3 = usdcEth.pairs) === null || _usdcEth$pairs3 === void 0 ? void 0 : (_usdcEth$pairs3$ = _usdcEth$pairs3[0]) === null || _usdcEth$pairs3$ === void 0 ? void 0 : _usdcEth$pairs3$.token0Price) * Number(vaderEth === null || vaderEth === void 0 ? void 0 : (_vaderEth$pairs = vaderEth.pairs) === null || _vaderEth$pairs === void 0 ? void 0 : (_vaderEth$pairs$ = _vaderEth$pairs[0]) === null || _vaderEth$pairs$ === void 0 ? void 0 : _vaderEth$pairs$.token1Price);\n  const roi = calculateDifference(marketPrice, bondInitPrice) / 2;\n  const roiPercentage = isFinite(roi) ? (_getPercentage = getPercentage(roi)) === null || _getPercentage === void 0 ? void 0 : _getPercentage.replace('-0', '0') : '';\n  const preCommit = usePreCommit(props === null || props === void 0 ? void 0 : (_props$bond5 = props.bond) === null || _props$bond5 === void 0 ? void 0 : _props$bond5.precommit);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Link, {\n      to: `/bond/${props.bond.address}`,\n      children: /*#__PURE__*/_jsxDEV(Flex, {\n        width: \"100%\",\n        alignItems: \"center\",\n        justifyContent: \"space-between\",\n        p: {\n          base: '12px 11px',\n          md: '0 24px'\n        },\n        minH: \"60px\",\n        cursor: \"pointer\",\n        animation: bondInfo !== null && bondInfo !== void 0 && bondInfo[1] && bondInfo !== null && bondInfo !== void 0 && (_bondInfo$ = bondInfo[1]) !== null && _bondInfo$ !== void 0 && _bondInfo$.gt(0) ? '2.3s ease-in-out infinite bgAnimation' : '',\n        transition: \"all 0.3s ease 0s\",\n        background: \"rgba(244, 155, 202, 0.08) none repeat scroll 0% 0%\",\n        mb: \"16px\",\n        borderRadius: \"16px\",\n        border: bondInfo !== null && bondInfo !== void 0 && bondInfo[1] && bondInfo !== null && bondInfo !== void 0 && (_bondInfo$2 = bondInfo[1]) !== null && _bondInfo$2 !== void 0 && _bondInfo$2.gt(0) ? '1px solid #ffffff10' : '1px solid #ffffff08',\n        _hover: {\n          cursor: 'pointer',\n          background: 'rgba(244, 155, 202, 0.2) none repeat scroll 0% 0%',\n          border: '1px solid #ffffff10'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Flex, {\n          alignItems: {\n            base: 'center'\n          },\n          width: {\n            base: '54%',\n            md: ''\n          },\n          flexWrap: bondInfo !== null && bondInfo !== void 0 && bondInfo[1] && bondInfo !== null && bondInfo !== void 0 && (_bondInfo$3 = bondInfo[1]) !== null && _bondInfo$3 !== void 0 && _bondInfo$3.gt(0) ? 'wrap' : '',\n          fontSize: {\n            base: '0.75rem',\n            md: '1rem'\n          },\n          fontWeight: \"bolder\",\n          children: [/*#__PURE__*/_jsxDEV(Image, {\n            width: \"23px\",\n            height: \"23px\",\n            borderRadius: \"50%\",\n            mr: {\n              base: '3px',\n              md: '7px'\n            },\n            src: (_props$bond$token = props.bond.token0) === null || _props$bond$token === void 0 ? void 0 : _props$bond$token.logoURI,\n            alt: `${(_props$bond$token2 = props.bond.token0) === null || _props$bond$token2 === void 0 ? void 0 : _props$bond$token2.name} token`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 7\n          }, this), ((_props$bond6 = props.bond) === null || _props$bond6 === void 0 ? void 0 : (_props$bond6$token = _props$bond6.token1) === null || _props$bond6$token === void 0 ? void 0 : _props$bond6$token.logoURI) && /*#__PURE__*/_jsxDEV(Image, {\n            width: \"23px\",\n            height: \"23px\",\n            borderRadius: \"50%\",\n            mr: {\n              base: '2px',\n              md: '10px'\n            },\n            src: (_props$bond$token3 = props.bond.token1) === null || _props$bond$token3 === void 0 ? void 0 : _props$bond$token3.logoURI,\n            alt: `${(_props$bond$token4 = props.bond.token1) === null || _props$bond$token4 === void 0 ? void 0 : _props$bond$token4.name} token`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 7\n          }, this), (_props$bond$token5 = props.bond.token0) === null || _props$bond$token5 === void 0 ? void 0 : _props$bond$token5.symbol, props.bond.token1 ? ` / ${props.bond.token1.symbol}` : `${String.fromCharCode(8194)}${props.bond.name}`, (bondInfo === null || bondInfo === void 0 ? void 0 : bondInfo[1]) && (bondInfo === null || bondInfo === void 0 ? void 0 : (_bondInfo$4 = bondInfo[1]) === null || _bondInfo$4 === void 0 ? void 0 : _bondInfo$4.gt(0)) && /*#__PURE__*/_jsxDEV(Tag, {\n            fontSize: {\n              base: '0.67rem',\n              md: '0.83rem'\n            },\n            mt: {\n              base: '3px',\n              md: ''\n            },\n            ml: \"10px\",\n            borderRadius: \"11px\",\n            variant: \"subtle\",\n            colorScheme: \"cyan\",\n            children: [/*#__PURE__*/_jsxDEV(CheckCircleIcon, {\n              mr: \"5px\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 9\n            }, this), \" Purchased\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 8\n          }, this), preCommit.open.data && /*#__PURE__*/_jsxDEV(Tag, {\n            fontSize: {\n              base: '0.67rem',\n              md: '0.83rem'\n            },\n            mt: {\n              base: '3px',\n              md: ''\n            },\n            ml: \"10px\",\n            borderRadius: \"11px\",\n            variant: \"subtle\",\n            colorScheme: \"purple\",\n            children: [/*#__PURE__*/_jsxDEV(ArrowForwardIcon, {\n              mr: \"5px\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 9\n            }, this), \" Pre-commit\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 8\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Flex, {\n          flexDir: \"row\",\n          alignContent: \"flex-end\",\n          justifyContent: \"flex-end\",\n          gridGap: \"0.7rem\",\n          children: [price && (usdcEth === null || usdcEth === void 0 ? void 0 : (_usdcEth$pairs4 = usdcEth.pairs) === null || _usdcEth$pairs4 === void 0 ? void 0 : (_usdcEth$pairs4$ = _usdcEth$pairs4[0]) === null || _usdcEth$pairs4$ === void 0 ? void 0 : _usdcEth$pairs4$.token0Price) && (principalEth === null || principalEth === void 0 ? void 0 : principalEth.principalPrice) && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: /*#__PURE__*/_jsxDEV(Tag, {\n              fontSize: {\n                base: '0.67rem',\n                md: '0.83rem'\n              },\n              colorScheme: \"gray\",\n              children: prettifyCurrency(props.bond.principal ? Number(ethers.utils.formatUnits(price, 18)) * (Number(usdcEth === null || usdcEth === void 0 ? void 0 : (_usdcEth$pairs5 = usdcEth.pairs) === null || _usdcEth$pairs5 === void 0 ? void 0 : (_usdcEth$pairs5$ = _usdcEth$pairs5[0]) === null || _usdcEth$pairs5$ === void 0 ? void 0 : _usdcEth$pairs5$.token0Price) * Number(principalEth === null || principalEth === void 0 ? void 0 : principalEth.principalPrice)) : Number(ethers.utils.formatUnits(price, 18)) * Number(usdcEth === null || usdcEth === void 0 ? void 0 : (_usdcEth$pairs6 = usdcEth.pairs) === null || _usdcEth$pairs6 === void 0 ? void 0 : (_usdcEth$pairs6$ = _usdcEth$pairs6[0]) === null || _usdcEth$pairs6$ === void 0 ? void 0 : _usdcEth$pairs6$.token0Price), 0, 5)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 9\n            }, this)\n          }, void 0, false), ((preCommit === null || preCommit === void 0 ? void 0 : (_preCommit$open = preCommit.open) === null || _preCommit$open === void 0 ? void 0 : _preCommit$open.data) && (props === null || props === void 0 ? void 0 : (_props$bond7 = props.bond) === null || _props$bond7 === void 0 ? void 0 : _props$bond7.discount) || !(preCommit !== null && preCommit !== void 0 && (_preCommit$open2 = preCommit.open) !== null && _preCommit$open2 !== void 0 && _preCommit$open2.data) && roi > 0) && /*#__PURE__*/_jsxDEV(Tag, {\n            fontSize: {\n              base: '0.67rem',\n              md: '0.83rem'\n            },\n            colorScheme: \"gray\",\n            children: [(preCommit === null || preCommit === void 0 ? void 0 : (_preCommit$open3 = preCommit.open) === null || _preCommit$open3 === void 0 ? void 0 : _preCommit$open3.data) && (props === null || props === void 0 ? void 0 : (_props$bond8 = props.bond) === null || _props$bond8 === void 0 ? void 0 : _props$bond8.discount) && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: getPercentage(props === null || props === void 0 ? void 0 : (_props$bond9 = props.bond) === null || _props$bond9 === void 0 ? void 0 : _props$bond9.discount)\n            }, void 0, false), !(preCommit !== null && preCommit !== void 0 && (_preCommit$open4 = preCommit.open) !== null && _preCommit$open4 !== void 0 && _preCommit$open4.data) && roi && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: roiPercentage\n            }, void 0, false)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 8\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 4\n    }, this)\n  }, void 0, false);\n};\n\n_s(BondItem, \"c1Fb4tnA48qy7ft5acV1/Yf1R2M=\", false, function () {\n  return [useWallet, useBondInfo, useUniswapV2Price, useUniswapV2Price, useUniswapV2Price, useBondPrice, usePreCommit];\n});\n\n_c = BondItem;\n\nvar _c;\n\n$RefreshReg$(_c, \"BondItem\");","map":{"version":3,"sources":["/home/augustin/vader-dapp/src/components/BondItem.js"],"names":["React","useWallet","ethers","PropTypes","Link","Flex","Image","Tag","CheckCircleIcon","ArrowForwardIcon","prettifyCurrency","getPercentage","calculateDifference","useBondInfo","useUniswapV2Price","defaults","useBondPrice","usePreCommit","BondItem","props","propTypes","bond","object","isRequired","wallet","data","bondInfo","address","account","usdcEth","uniswapV2","usdcEthPair","vaderEth","vaderEthPair","principalEth","principal","price","bondInitPrice","Number","utils","formatUnits","pairs","token0Price","principalPrice","marketPrice","token1Price","roi","roiPercentage","isFinite","replace","preCommit","precommit","base","md","gt","cursor","background","border","token0","logoURI","name","token1","symbol","String","fromCharCode","open","discount"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { useWallet } from 'use-wallet'\nimport { ethers } from 'ethers'\nimport PropTypes from 'prop-types'\nimport { Link } from 'react-router-dom'\nimport { Flex, Image, Tag } from '@chakra-ui/react'\nimport { CheckCircleIcon, ArrowForwardIcon } from '@chakra-ui/icons'\nimport { prettifyCurrency, getPercentage, calculateDifference } from '../common/utils'\nimport { useBondInfo } from '../hooks/useBondInfo'\nimport { useUniswapV2Price } from '../hooks/useUniswapV2Price'\nimport defaults from '../common/defaults'\nimport { useBondPrice } from '../hooks/useBondPrice'\nimport { usePreCommit } from '../hooks/usePreCommit'\n\nexport const BondItem = (props) => {\n\n\tBondItem.propTypes = {\n\t\tbond: PropTypes.object.isRequired,\n\t}\n\n\tconst wallet = useWallet()\n\tconst { data: bondInfo } = useBondInfo(props.bond?.address, wallet.account, true)\n\tconst [usdcEth] = useUniswapV2Price(defaults.address.uniswapV2.usdcEthPair)\n\tconst [vaderEth] = useUniswapV2Price(defaults.address.uniswapV2.vaderEthPair)\n\tconst [principalEth] = useUniswapV2Price(props.bond?.principal?.address, true)\n\tconst { data: price } = useBondPrice(props.bond?.address)\n\n\tconst bondInitPrice = props?.bond?.principal ? (Number(ethers.utils.formatUnits(price ? price : '0', 18)) *\n\t(Number(usdcEth?.pairs?.[0]?.token0Price) * Number(principalEth?.principalPrice))) :\n\t\t(Number(ethers.utils.formatUnits(price ? price : '0', 18)) *\n\t\t(Number(usdcEth?.pairs?.[0]?.token0Price)))\n\tconst marketPrice = (Number(usdcEth?.pairs?.[0]?.token0Price) * Number(vaderEth?.pairs?.[0]?.token1Price))\n\tconst roi = calculateDifference(marketPrice, bondInitPrice) / 2\n\tconst roiPercentage = isFinite(roi) ? getPercentage(roi)?.replace('-0', '0') : ''\n\tconst preCommit = usePreCommit(props?.bond?.precommit)\n\n\treturn (\n\t\t<>\n\t\t\t<Link to={`/bond/${props.bond.address}`}>\n\t\t\t\t<Flex\n\t\t\t\t\twidth='100%'\n\t\t\t\t\talignItems='center'\n\t\t\t\t\tjustifyContent='space-between'\n\t\t\t\t\tp={{ base: '12px 11px', md: '0 24px' }}\n\t\t\t\t\tminH='60px'\n\t\t\t\t\tcursor='pointer'\n\t\t\t\t\tanimation={ bondInfo?.[1] && bondInfo?.[1]?.gt(0) ? '2.3s ease-in-out infinite bgAnimation' : '' }\n\t\t\t\t\ttransition='all 0.3s ease 0s'\n\t\t\t\t\tbackground='rgba(244, 155, 202, 0.08) none repeat scroll 0% 0%'\n\t\t\t\t\tmb='16px'\n\t\t\t\t\tborderRadius='16px'\n\t\t\t\t\tborder={ bondInfo?.[1] && bondInfo?.[1]?.gt(0) ? '1px solid #ffffff10' : '1px solid #ffffff08' }\n\t\t\t\t\t_hover={{\n\t\t\t\t\t\tcursor: 'pointer',\n\t\t\t\t\t\tbackground: 'rgba(244, 155, 202, 0.2) none repeat scroll 0% 0%',\n\t\t\t\t\t\tborder: '1px solid #ffffff10',\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<Flex\n\t\t\t\t\t\talignItems={{ base: 'center' }}\n\t\t\t\t\t\twidth={{ base: '54%', md: '' }}\n\t\t\t\t\t\tflexWrap={bondInfo?.[1] && bondInfo?.[1]?.gt(0) ? 'wrap' : '' }\n\t\t\t\t\t\tfontSize={{ base: '0.75rem', md: '1rem' }}\n\t\t\t\t\t\tfontWeight='bolder'>\n\t\t\t\t\t\t<Image\n\t\t\t\t\t\t\twidth='23px'\n\t\t\t\t\t\t\theight='23px'\n\t\t\t\t\t\t\tborderRadius='50%'\n\t\t\t\t\t\t\tmr={{ base: '3px', md: '7px' }}\n\t\t\t\t\t\t\tsrc={props.bond.token0?.logoURI}\n\t\t\t\t\t\t\talt={`${props.bond.token0?.name} token`}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{props.bond?.token1?.logoURI &&\n\t\t\t\t\t\t<Image\n\t\t\t\t\t\t\twidth='23px'\n\t\t\t\t\t\t\theight='23px'\n\t\t\t\t\t\t\tborderRadius='50%'\n\t\t\t\t\t\t\tmr={{ base: '2px', md: '10px' }}\n\t\t\t\t\t\t\tsrc={props.bond.token1?.logoURI}\n\t\t\t\t\t\t\talt={`${props.bond.token1?.name} token`}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{props.bond.token0?.symbol}{props.bond.token1 ? ` / ${props.bond.token1.symbol}` : `${String.fromCharCode(8194)}${props.bond.name}`}\n\t\t\t\t\t\t{bondInfo?.[1] && bondInfo?.[1]?.gt(0) &&\n\t\t\t\t\t\t\t<Tag\n\t\t\t\t\t\t\t\tfontSize={{ base: '0.67rem', md: '0.83rem' }}\n\t\t\t\t\t\t\t\tmt={{ base: '3px', md: '' }}\n\t\t\t\t\t\t\t\tml='10px'\n\t\t\t\t\t\t\t\tborderRadius='11px'\n\t\t\t\t\t\t\t\tvariant='subtle'\n\t\t\t\t\t\t\t\tcolorScheme='cyan'>\n\t\t\t\t\t\t\t\t<CheckCircleIcon\n\t\t\t\t\t\t\t\t\tmr='5px'\n\t\t\t\t\t\t\t\t/> Purchased\n\t\t\t\t\t\t\t</Tag>\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{preCommit.open.data &&\n\t\t\t\t\t\t\t<Tag\n\t\t\t\t\t\t\t\tfontSize={{ base: '0.67rem', md: '0.83rem' }}\n\t\t\t\t\t\t\t\tmt={{ base: '3px', md: '' }}\n\t\t\t\t\t\t\t\tml='10px'\n\t\t\t\t\t\t\t\tborderRadius='11px'\n\t\t\t\t\t\t\t\tvariant='subtle'\n\t\t\t\t\t\t\t\tcolorScheme='purple'>\n\t\t\t\t\t\t\t\t<ArrowForwardIcon\n\t\t\t\t\t\t\t\t\tmr='5px'\n\t\t\t\t\t\t\t\t/> Pre-commit\n\t\t\t\t\t\t\t</Tag>\n\t\t\t\t\t\t}\n\t\t\t\t\t</Flex>\n\t\t\t\t\t<Flex\n\t\t\t\t\t\tflexDir='row'\n\t\t\t\t\t\talignContent='flex-end'\n\t\t\t\t\t\tjustifyContent='flex-end'\n\t\t\t\t\t\tgridGap='0.7rem'\n\t\t\t\t\t>\n\t\t\t\t\t\t{price && usdcEth?.pairs?.[0]?.token0Price && principalEth?.principalPrice &&\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<Tag\n\t\t\t\t\t\t\t\t\tfontSize={{ base: '0.67rem', md: '0.83rem' }}\n\t\t\t\t\t\t\t\t\tcolorScheme='gray'>\n\t\t\t\t\t\t\t\t\t{prettifyCurrency(\n\t\t\t\t\t\t\t\t\t\tprops.bond.principal ? (Number(ethers.utils.formatUnits(price, 18)) *\n\t\t\t\t\t\t\t\t\t\t(Number(usdcEth?.pairs?.[0]?.token0Price) *\n\t\t\t\t\t\t\t\t\t\tNumber(principalEth?.principalPrice))) : (Number(ethers.utils.formatUnits(price, 18)) *\n\t\t\t\t\t\t\t\t\t\t(Number(usdcEth?.pairs?.[0]?.token0Price))),\n\t\t\t\t\t\t\t\t\t\t0, 5)}\n\t\t\t\t\t\t\t\t</Tag>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{((preCommit?.open?.data &&\n\t\t\t\t\t\t\t\t\tprops?.bond?.discount) ||\n\t\t\t\t\t\t\t(!preCommit?.open?.data &&\n\t\t\t\t\t\t\troi > 0)) &&\n\t\t\t\t\t\t\t<Tag\n\t\t\t\t\t\t\t\tfontSize={{ base: '0.67rem', md: '0.83rem' }}\n\t\t\t\t\t\t\t\tcolorScheme='gray'>\n\t\t\t\t\t\t\t\t{preCommit?.open?.data &&\n\t\t\t\t\t\t\t\t\tprops?.bond?.discount &&\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t{getPercentage(props?.bond?.discount)}\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t{!preCommit?.open?.data &&\n\t\t\t\t\t\t\t\t\troi &&\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t{roiPercentage}\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</Tag>\n\t\t\t\t\t\t}\n\t\t\t\t\t</Flex>\n\t\t\t\t</Flex>\n\t\t\t</Link>\n\t\t</>\n\t)\n}"]},"metadata":{},"sourceType":"module"}