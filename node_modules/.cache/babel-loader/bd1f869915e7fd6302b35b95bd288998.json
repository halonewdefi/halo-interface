{"ast":null,"code":"var _jsxFileName = \"/home/augustin/vader-dapp/src/components/BalanceIndicator.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { useQuery } from 'react-query';\nimport { BigNumber, utils } from 'ethers';\nimport { Button, Box, Image, Fade, Popover, PopoverTrigger, Portal, PopoverContent, PopoverBody, Flex, Container, useBreakpointValue } from '@chakra-ui/react';\nimport defaults from '../common/defaults';\nimport { useWallet } from 'use-wallet';\nimport { useXvaderPrice } from '../hooks/useXvaderPrice';\nimport { getERC20BalanceOf } from '../common/ethereum';\nimport { prettifyNumber } from '../common/utils';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Item = props => {\n  Item.propTypes = {\n    name: PropTypes.string.isRequired,\n    token: PropTypes.object.isRequired,\n    value: PropTypes.any.isRequired\n  };\n  return /*#__PURE__*/_jsxDEV(Box, {\n    children: [/*#__PURE__*/_jsxDEV(Box, {\n      children: props.name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 24,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Flex, {\n      children: [/*#__PURE__*/_jsxDEV(Container, {\n        p: \"0\",\n        children: /*#__PURE__*/_jsxDEV(Box, {\n          children: /*#__PURE__*/_jsxDEV(Flex, {\n            justifyContent: \"flex-start\",\n            fontWeight: \"bolder\",\n            children: [/*#__PURE__*/_jsxDEV(Image, {\n              width: \"24px\",\n              height: \"24px\",\n              mr: \"5px\",\n              src: props.token.logoURI,\n              alt: `${props.token.name} token`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 33,\n              columnNumber: 8\n            }, this), props.token.symbol]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 30,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 29,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Container, {\n        p: \"0\",\n        children: /*#__PURE__*/_jsxDEV(Box, {\n          fontSize: {\n            base: '1rem',\n            md: '1.2rem'\n          },\n          fontWeight: \"bold\",\n          textAlign: \"right\",\n          children: props.value\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 23,\n    columnNumber: 3\n  }, this);\n};\n\n_c = Item;\nexport const BalanceIndicator = () => {\n  _s();\n\n  const wallet = useWallet();\n  const xvdrExchangeRate = useXvaderPrice();\n  const vaderBalance = useQuery(`${defaults.vader.address}_erc20Balanceof_${wallet === null || wallet === void 0 ? void 0 : wallet.account}`, async () => {\n    if (wallet.account) {\n      return await getERC20BalanceOf(defaults.vader.address, wallet.account, defaults.network.provider);\n    }\n  }, {\n    staleTime: defaults.api.staleTime\n  });\n  const xvaderBalance = useQuery(`${defaults.xvader.address}_erc20Balanceof_${wallet === null || wallet === void 0 ? void 0 : wallet.account}`, async () => {\n    if (wallet.account) {\n      return await getERC20BalanceOf(defaults.xvader.address, wallet.account, defaults.network.provider);\n    }\n  }, {\n    staleTime: defaults.api.staleTime\n  });\n\n  const totalBalance = function () {\n    var _xvdrExchangeRate$;\n\n    let total = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n    if (xvdrExchangeRate !== null && xvdrExchangeRate !== void 0 && (_xvdrExchangeRate$ = xvdrExchangeRate[0]) !== null && _xvdrExchangeRate$ !== void 0 && _xvdrExchangeRate$.global.value && xvaderBalance.data && vaderBalance.data) {\n      var _xvdrExchangeRate$2, _xvdrExchangeRate$2$g;\n\n      return utils.formatEther(BigNumber.from(xvdrExchangeRate === null || xvdrExchangeRate === void 0 ? void 0 : (_xvdrExchangeRate$2 = xvdrExchangeRate[0]) === null || _xvdrExchangeRate$2 === void 0 ? void 0 : (_xvdrExchangeRate$2$g = _xvdrExchangeRate$2.global) === null || _xvdrExchangeRate$2$g === void 0 ? void 0 : _xvdrExchangeRate$2$g.value).mul(xvaderBalance === null || xvaderBalance === void 0 ? void 0 : xvaderBalance.data).div(utils.parseUnits('1', 18)).add(total ? vaderBalance === null || vaderBalance === void 0 ? void 0 : vaderBalance.data : 0));\n    }\n  };\n\n  const placement = useBreakpointValue({\n    base: 'bottom-end',\n    md: 'auto'\n  });\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: Number(totalBalance()) > 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(Popover, {\n        closeOnEsc: true,\n        closeOnBlur: true,\n        matchWidth: true,\n        placement: placement,\n        children: [/*#__PURE__*/_jsxDEV(PopoverTrigger, {\n          children: /*#__PURE__*/_jsxDEV(Fade, {\n            unmountOnExit: true,\n            in: Number(totalBalance()) > 0,\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              size: \"md\",\n              fontSize: {\n                base: '0.65rem',\n                sm: 'sm'\n              },\n              variant: \"outlineAlter\",\n              display: \"flex\",\n              flexDirection: \"row\",\n              alignItems: \"center\",\n              transform: {\n                base: 'scale(0.86)',\n                sm: 'scale(1)'\n              },\n              children: /*#__PURE__*/_jsxDEV(Box, {\n                display: \"inline-flex\",\n                alignItems: \"center\",\n                justifyContent: \"center\",\n                borderRadius: \"12px\",\n                background: \"#000\",\n                p: \"7px 11px\",\n                children: /*#__PURE__*/_jsxDEV(Box, {\n                  d: \"flex\",\n                  alignItems: \"center\",\n                  children: [/*#__PURE__*/_jsxDEV(Image, {\n                    width: \"24px\",\n                    height: \"24px\",\n                    mr: \"5px\",\n                    src: defaults.vader.logoURI,\n                    alt: `${defaults.vader.name} token`\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 139,\n                    columnNumber: 12\n                  }, this), /*#__PURE__*/_jsxDEV(Box, {\n                    as: \"h3\",\n                    m: \"0\",\n                    fontSize: \"1.02rem\",\n                    fontWeight: \"bold\",\n                    textTransform: \"capitalize\",\n                    children: prettifyNumber(totalBalance(true), 0, 2)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 146,\n                    columnNumber: 12\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 138,\n                  columnNumber: 11\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 130,\n                columnNumber: 10\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 9\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 8\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(Portal, {\n          children: /*#__PURE__*/_jsxDEV(PopoverContent, {\n            maxW: \"304px\",\n            children: /*#__PURE__*/_jsxDEV(PopoverBody, {\n              display: \"flex\",\n              flexDir: \"column\",\n              gridGap: \"0.9rem\",\n              padding: \"1.6rem 1.6rem\",\n              children: [Number(totalBalance(false)) > 0 && /*#__PURE__*/_jsxDEV(Item, {\n                name: 'Staking',\n                token: defaults.vader,\n                value: prettifyNumber(totalBalance(false), 0, 2)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 170,\n                columnNumber: 11\n              }, this), xvaderBalance.data.gt(0) && /*#__PURE__*/_jsxDEV(Item, {\n                name: 'Balance',\n                token: defaults.xvader,\n                value: prettifyNumber(utils.formatEther(xvaderBalance.data), 0, 2)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 178,\n                columnNumber: 11\n              }, this), vaderBalance.data.gt(0) && /*#__PURE__*/_jsxDEV(Item, {\n                name: 'Balance',\n                token: defaults.vader,\n                value: prettifyNumber(utils.formatEther(vaderBalance.data), 0, 2)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 186,\n                columnNumber: 11\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 163,\n              columnNumber: 9\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 8\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 6\n      }, this)\n    }, void 0, false)\n  }, void 0, false);\n};\n\n_s(BalanceIndicator, \"YlkDp+r3V1v1FQe9aQb+4x+UhH4=\", false, function () {\n  return [useWallet, useXvaderPrice, useQuery, useQuery, useBreakpointValue];\n});\n\n_c2 = BalanceIndicator;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Item\");\n$RefreshReg$(_c2, \"BalanceIndicator\");","map":{"version":3,"sources":["/home/augustin/vader-dapp/src/components/BalanceIndicator.js"],"names":["React","PropTypes","useQuery","BigNumber","utils","Button","Box","Image","Fade","Popover","PopoverTrigger","Portal","PopoverContent","PopoverBody","Flex","Container","useBreakpointValue","defaults","useWallet","useXvaderPrice","getERC20BalanceOf","prettifyNumber","Item","props","propTypes","name","string","isRequired","token","object","value","any","logoURI","symbol","base","md","BalanceIndicator","wallet","xvdrExchangeRate","vaderBalance","vader","address","account","network","provider","staleTime","api","xvaderBalance","xvader","totalBalance","total","global","data","formatEther","from","mul","div","parseUnits","add","placement","Number","sm","gt"],"mappings":"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","sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\nimport { useQuery } from 'react-query'\nimport { BigNumber, utils } from 'ethers'\nimport { Button, Box, Image, Fade, Popover, PopoverTrigger,\n\tPortal, PopoverContent,\n\tPopoverBody, Flex, Container, useBreakpointValue } from '@chakra-ui/react'\nimport defaults from '../common/defaults'\nimport { useWallet } from 'use-wallet'\nimport { useXvaderPrice } from '../hooks/useXvaderPrice'\nimport { getERC20BalanceOf } from '../common/ethereum'\nimport { prettifyNumber } from '../common/utils'\n\nconst Item = (props) => {\n\n\tItem.propTypes = {\n\t\tname: PropTypes.string.isRequired,\n\t\ttoken: PropTypes.object.isRequired,\n\t\tvalue: PropTypes.any.isRequired,\n\t}\n\n\treturn (\n\t\t<Box>\n\t\t\t<Box>\n\t\t\t\t{props.name}\n\t\t\t</Box>\n\t\t\t<Flex>\n\t\t\t\t<Container p='0'>\n\t\t\t\t\t<Box>\n\t\t\t\t\t\t<Flex\n\t\t\t\t\t\t\tjustifyContent='flex-start'\n\t\t\t\t\t\t\tfontWeight='bolder'>\n\t\t\t\t\t\t\t<Image\n\t\t\t\t\t\t\t\twidth='24px'\n\t\t\t\t\t\t\t\theight='24px'\n\t\t\t\t\t\t\t\tmr='5px'\n\t\t\t\t\t\t\t\tsrc={props.token.logoURI}\n\t\t\t\t\t\t\t\talt={`${props.token.name} token`}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{props.token.symbol}\n\t\t\t\t\t\t</Flex>\n\t\t\t\t\t</Box>\n\t\t\t\t</Container>\n\t\t\t\t<Container p='0'>\n\t\t\t\t\t<Box\n\t\t\t\t\t\tfontSize={{ base: '1rem', md: '1.2rem' }}\n\t\t\t\t\t\tfontWeight='bold'\n\t\t\t\t\t\ttextAlign='right'\n\t\t\t\t\t>\n\t\t\t\t\t\t{props.value}\n\t\t\t\t\t</Box>\n\t\t\t\t</Container>\n\t\t\t</Flex>\n\t\t</Box>\n\t)\n}\n\nexport const BalanceIndicator = () => {\n\n\tconst wallet = useWallet()\n\tconst xvdrExchangeRate = useXvaderPrice()\n\n\tconst vaderBalance = useQuery(`${defaults.vader.address}_erc20Balanceof_${wallet?.account}`,\n\t\tasync () => {\n\t\t\tif (wallet.account) {\n\t\t\t\treturn await getERC20BalanceOf(\n\t\t\t\t\tdefaults.vader.address,\n\t\t\t\t\twallet.account,\n\t\t\t\t\tdefaults.network.provider,\n\t\t\t\t)\n\t\t\t}\n\t\t}, {\n\t\t\tstaleTime: defaults.api.staleTime,\n\t\t},\n\t)\n\n\tconst xvaderBalance = useQuery(`${defaults.xvader.address}_erc20Balanceof_${wallet?.account}`,\n\t\tasync () => {\n\t\t\tif (wallet.account) {\n\t\t\t\treturn await getERC20BalanceOf(\n\t\t\t\t\tdefaults.xvader.address,\n\t\t\t\t\twallet.account,\n\t\t\t\t\tdefaults.network.provider,\n\t\t\t\t)\n\t\t\t}\n\t\t}, {\n\t\t\tstaleTime: defaults.api.staleTime,\n\t\t},\n\t)\n\n\tconst totalBalance = (total = true) => {\n\t\tif (xvdrExchangeRate?.[0]?.global.value && xvaderBalance.data && vaderBalance.data) {\n\t\t\treturn utils.formatEther(\n\t\t\t\tBigNumber.from(xvdrExchangeRate?.[0]?.global?.value)\n\t\t\t\t\t.mul(xvaderBalance?.data)\n\t\t\t\t\t.div(utils.parseUnits('1', 18))\n\t\t\t\t\t.add(total ? vaderBalance?.data : 0))\n\t\t}\n\t}\n\n\tconst placement = useBreakpointValue({ base: 'bottom-end', md: 'auto' })\n\n\treturn (\n\t\t<>\n\t\t\t{Number(totalBalance()) > 0 &&\n\t\t\t\t<>\n\t\t\t\t\t<Popover\n\t\t\t\t\t\tcloseOnEsc={true}\n\t\t\t\t\t\tcloseOnBlur={true}\n\t\t\t\t\t\tmatchWidth={true}\n\t\t\t\t\t\tplacement={placement}\n\t\t\t\t\t>\n\t\t\t\t\t\t<PopoverTrigger>\n\t\t\t\t\t\t\t<Fade\n\t\t\t\t\t\t\t\tunmountOnExit={true}\n\t\t\t\t\t\t\t\tin={Number(totalBalance()) > 0}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tsize='md'\n\t\t\t\t\t\t\t\t\tfontSize={{ base: '0.65rem', sm: 'sm' }}\n\t\t\t\t\t\t\t\t\tvariant='outlineAlter'\n\t\t\t\t\t\t\t\t\tdisplay='flex'\n\t\t\t\t\t\t\t\t\tflexDirection='row'\n\t\t\t\t\t\t\t\t\talignItems='center'\n\t\t\t\t\t\t\t\t\ttransform={{\n\t\t\t\t\t\t\t\t\t\tbase: 'scale(0.86)',\n\t\t\t\t\t\t\t\t\t\tsm: 'scale(1)',\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\t\t\t\tdisplay='inline-flex'\n\t\t\t\t\t\t\t\t\t\talignItems='center'\n\t\t\t\t\t\t\t\t\t\tjustifyContent='center'\n\t\t\t\t\t\t\t\t\t\tborderRadius='12px'\n\t\t\t\t\t\t\t\t\t\tbackground='#000'\n\t\t\t\t\t\t\t\t\t\tp='7px 11px'\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Box d='flex' alignItems='center'>\n\t\t\t\t\t\t\t\t\t\t\t<Image\n\t\t\t\t\t\t\t\t\t\t\t\twidth='24px'\n\t\t\t\t\t\t\t\t\t\t\t\theight='24px'\n\t\t\t\t\t\t\t\t\t\t\t\tmr='5px'\n\t\t\t\t\t\t\t\t\t\t\t\tsrc={defaults.vader.logoURI}\n\t\t\t\t\t\t\t\t\t\t\t\talt={`${defaults.vader.name} token`}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\t\t\t\t\t\tas='h3'\n\t\t\t\t\t\t\t\t\t\t\t\tm='0'\n\t\t\t\t\t\t\t\t\t\t\t\tfontSize='1.02rem'\n\t\t\t\t\t\t\t\t\t\t\t\tfontWeight='bold'\n\t\t\t\t\t\t\t\t\t\t\t\ttextTransform='capitalize'>\n\t\t\t\t\t\t\t\t\t\t\t\t{prettifyNumber(totalBalance(true), 0, 2)}\n\t\t\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</Fade>\n\t\t\t\t\t\t</PopoverTrigger>\n\t\t\t\t\t\t<Portal>\n\t\t\t\t\t\t\t<PopoverContent\n\t\t\t\t\t\t\t\tmaxW='304px'\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<PopoverBody\n\t\t\t\t\t\t\t\t\tdisplay='flex'\n\t\t\t\t\t\t\t\t\tflexDir='column'\n\t\t\t\t\t\t\t\t\tgridGap='0.9rem'\n\t\t\t\t\t\t\t\t\tpadding='1.6rem 1.6rem'\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{Number(totalBalance(false)) > 0 &&\n\t\t\t\t\t\t\t\t\t\t<Item\n\t\t\t\t\t\t\t\t\t\t\tname={'Staking'}\n\t\t\t\t\t\t\t\t\t\t\ttoken={defaults.vader}\n\t\t\t\t\t\t\t\t\t\t\tvalue={prettifyNumber(totalBalance(false), 0, 2)}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t{xvaderBalance.data.gt(0) &&\n\t\t\t\t\t\t\t\t\t\t<Item\n\t\t\t\t\t\t\t\t\t\t\tname={'Balance'}\n\t\t\t\t\t\t\t\t\t\t\ttoken={defaults.xvader}\n\t\t\t\t\t\t\t\t\t\t\tvalue={prettifyNumber(utils.formatEther(xvaderBalance.data), 0, 2)}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t{vaderBalance.data.gt(0) &&\n\t\t\t\t\t\t\t\t\t\t<Item\n\t\t\t\t\t\t\t\t\t\t\tname={'Balance'}\n\t\t\t\t\t\t\t\t\t\t\ttoken={defaults.vader}\n\t\t\t\t\t\t\t\t\t\t\tvalue={prettifyNumber(utils.formatEther(vaderBalance.data), 0, 2)}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</PopoverBody>\n\t\t\t\t\t\t\t</PopoverContent>\n\t\t\t\t\t\t</Portal>\n\t\t\t\t\t</Popover>\n\t\t\t\t</>\n\t\t\t}\n\t\t</>\n\t)\n}\n"]},"metadata":{},"sourceType":"module"}