{"ast":null,"code":"var _jsxFileName = \"/home/augustin/literate-octo-guide/src/components/WalletConnectionToggle/index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useRef, useState, useEffect } from 'react';\nimport { useWallet } from 'use-wallet';\nimport { Menu, MenuButton, Button, Portal, MenuList, MenuItem, useToast } from '@chakra-ui/react';\nimport { CloseIcon } from '@chakra-ui/icons';\nimport { prettifyAddress } from '../../common/utils';\nimport Jazzicon from '@metamask/jazzicon';\nimport { connected } from '../../messages';\nimport { WalletConnectionModal } from '../../components';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const WalletConnectionToggle = props => {\n  _s();\n\n  const initialText = 'Connect';\n  const wallet = useWallet();\n  const ref = useRef();\n  const toast = useToast();\n  const [working, setWorking] = useState(false);\n  const [text, setText] = useState(initialText);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\n\n  const toggle = () => {\n    if (!wallet.account) {\n      setIsModalOpen(true);\n    } else {\n      setIsMenuOpen(true);\n    }\n  };\n\n  const prettyAccount = prettifyAddress(wallet === null || wallet === void 0 ? void 0 : wallet.account, 4);\n  useEffect(() => {\n    if (wallet.account !== null && !working) {\n      setText(prettyAccount);\n      ref.current.appendChild(Jazzicon(16, parseInt(wallet.account.slice(2, 10), 16))).style.marginLeft = '7px';\n      toast(connected);\n    }\n\n    return () => {\n      if (wallet.account) {\n        if (ref.current) ref.current.getElementsByTagName('div')[0].remove();\n        setText(initialText);\n      }\n    };\n  }, [wallet.account]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Menu, {\n      isOpen: isMenuOpen,\n      onClose: () => setIsMenuOpen(false),\n      closeOnEsc: true,\n      closeOnBlur: true,\n      matchWidth: true,\n      placement: 'bottom-end',\n      autoSelect: false,\n      children: [/*#__PURE__*/_jsxDEV(MenuButton, {\n        as: Button,\n        size: \"md\",\n        minWidth: \"initial\",\n        fontSize: {\n          base: '0.65rem',\n          sm: 'sm'\n        },\n        variant: \"solidRounded\",\n        \"aria-label\": \"Wallet Connection Status\",\n        isLoading: working,\n        onClick: toggle,\n        display: \"flex\",\n        flexDirection: \"row\",\n        ref: ref,\n        ...props,\n        style: {\n          textAlign: 'center'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            order: '-1'\n          },\n          children: text\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Portal, {\n        children: /*#__PURE__*/_jsxDEV(MenuList, {\n          zIndex: {\n            base: '2',\n            md: '1'\n          },\n          children: /*#__PURE__*/_jsxDEV(MenuItem, {\n            icon: /*#__PURE__*/_jsxDEV(CloseIcon, {\n              layerStyle: \"menuIcon\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 14\n            }, this),\n            onClick: () => wallet === null || wallet === void 0 ? void 0 : wallet.reset(),\n            children: \"Disconnect\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(WalletConnectionModal, {\n      isOpen: isModalOpen,\n      onClose: () => setIsModalOpen(false) & setWorking(false),\n      setWorking: setWorking\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true);\n};\n\n_s(WalletConnectionToggle, \"tFPrvBiDvTRzFOYNd3erqnjPlVY=\", false, function () {\n  return [useWallet, useToast];\n});\n\n_c = WalletConnectionToggle;\n\nvar _c;\n\n$RefreshReg$(_c, \"WalletConnectionToggle\");","map":{"version":3,"sources":["/home/augustin/literate-octo-guide/src/components/WalletConnectionToggle/index.js"],"names":["React","useRef","useState","useEffect","useWallet","Menu","MenuButton","Button","Portal","MenuList","MenuItem","useToast","CloseIcon","prettifyAddress","Jazzicon","connected","WalletConnectionModal","WalletConnectionToggle","props","initialText","wallet","ref","toast","working","setWorking","text","setText","isModalOpen","setIsModalOpen","isMenuOpen","setIsMenuOpen","toggle","account","prettyAccount","current","appendChild","parseInt","slice","style","marginLeft","getElementsByTagName","remove","base","sm","textAlign","order","md","reset"],"mappings":"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","sourcesContent":["import React, { useRef, useState, useEffect } from 'react'\nimport { useWallet } from 'use-wallet'\nimport { Menu, MenuButton, Button, Portal, MenuList,\n\tMenuItem, useToast } from '@chakra-ui/react'\nimport { CloseIcon } from '@chakra-ui/icons'\nimport { prettifyAddress } from '../../common/utils'\nimport Jazzicon from '@metamask/jazzicon'\nimport { connected } from '../../messages'\nimport { WalletConnectionModal } from '../../components'\n\nexport const WalletConnectionToggle = props => {\n\tconst initialText = 'Connect'\n\tconst wallet = useWallet()\n\tconst ref = useRef()\n\tconst toast = useToast()\n\tconst [working, setWorking] = useState(false)\n\tconst [text, setText] = useState(initialText)\n\tconst [isModalOpen, setIsModalOpen] = useState(false)\n\tconst [isMenuOpen, setIsMenuOpen] = useState(false)\n\n\tconst toggle = () => {\n\t\tif (!wallet.account) {\n\t\t\tsetIsModalOpen(true)\n\t\t}\n\t\telse {\n\t\t\tsetIsMenuOpen(true)\n\t\t}\n\t}\n\n\tconst prettyAccount = prettifyAddress(wallet?.account, 4)\n\n\tuseEffect(() => {\n\t\tif (wallet.account !== null &&\n\t\t\t!working) {\n\t\t\tsetText(prettyAccount)\n\t\t\tref.current.appendChild(\n\t\t\t\tJazzicon(16, parseInt(wallet.account.slice(2, 10), 16)),\n\t\t\t).style.marginLeft = '7px'\n\t\t\ttoast(connected)\n\t\t}\n\t\treturn () => {\n\t\t\tif (wallet.account) {\n\t\t\t\tif (ref.current) ref.current.getElementsByTagName('div')[0].remove()\n\t\t\t\tsetText(initialText)\n\t\t\t}\n\t\t}\n\t}, [wallet.account])\n\n\treturn (\n\t\t<>\n\t\t\t<Menu\n\t\t\t\tisOpen={isMenuOpen}\n\t\t\t\tonClose={() => setIsMenuOpen(false)}\n\t\t\t\tcloseOnEsc={true}\n\t\t\t\tcloseOnBlur={true}\n\t\t\t\tmatchWidth={true}\n\t\t\t\tplacement={'bottom-end'}\n\t\t\t\tautoSelect={false}\n\t\t\t>\n\t\t\t\t<MenuButton\n\t\t\t\t\tas={Button}\n\t\t\t\t\tsize='md'\n\t\t\t\t\tminWidth='initial'\n\t\t\t\t\tfontSize={{ base: '0.65rem', sm: 'sm' }}\n\t\t\t\t\tvariant='solidRounded'\n\t\t\t\t\taria-label='Wallet Connection Status'\n\t\t\t\t\tisLoading={working}\n\t\t\t\t\tonClick={toggle}\n\t\t\t\t\tdisplay='flex'\n\t\t\t\t\tflexDirection='row'\n\t\t\t\t\tref={ref}\n\t\t\t\t\t{...props}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\ttextAlign: 'center',\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<span\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\torder: '-1',\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{text}\n\t\t\t\t\t</span>\n\t\t\t\t</MenuButton>\n\t\t\t\t<Portal>\n\t\t\t\t\t<MenuList\n\t\t\t\t\t\tzIndex={{ base: '2', md: '1' }}>\n\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\ticon={<CloseIcon layerStyle='menuIcon' />}\n\t\t\t\t\t\t\tonClick={() => wallet?.reset()}\n\t\t\t\t\t\t>\n      \t\t\t\tDisconnect\n\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t</MenuList>\n\t\t\t\t</Portal>\n\t\t\t</Menu>\n\t\t\t<WalletConnectionModal\n\t\t\t\tisOpen={isModalOpen}\n\t\t\t\tonClose={() => setIsModalOpen(false) & setWorking(false)}\n\t\t\t\tsetWorking={setWorking}\n\t\t\t/>\n\t\t</>\n\t)\n}\n"]},"metadata":{},"sourceType":"module"}